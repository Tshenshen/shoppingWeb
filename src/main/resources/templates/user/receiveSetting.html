<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <title>收货地址</title>
    <script th:src="@{/js/jquery-3.4.1.js}"></script>
    <script th:src="@{/webjars/vue/2.6.11/dist/vue.js}"></script>
    <script th:src="@{/webjars/element-ui/2.13.0/lib/index.js}"></script>
    <script src="" th:src="@{/js/bootstrap.js}"></script>
    <script src="" th:src="@{/js/axios.min.js}"></script>
    <link th:href="@{/webjars/element-ui/2.13.0/lib/theme-chalk/index.css}" rel="stylesheet">
    <link href="" rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/css/user/receiveSetting.css}"/>
</head>
<body>
<div th:replace="toolBar/topNavBar::topNavBar"></div>
<script th:src="@{/js/toolBar/topNavBar.js}"></script>
<div id="app">
    <div class="main-fra">
        <h1 class="title">收货地址</h1>
        <!--外部框-->
        <div class="outsideFrame">
            <!--内容-->
            <div>
                <!--<el-button type="text" @click="dialogFormVisible = true">打开嵌套表单的 Dialog</el-button>-->

                <!--<el-dialog title="收货地址" :visible.sync="dialogFormVisible">-->
                    <!--<el-form :model="form">-->
                        <!--<el-form-item label="活动名称" :label-width="formLabelWidth">-->
                            <!--<el-input v-model="form.name" autocomplete="off"></el-input>-->
                        <!--</el-form-item>-->
                        <!--<el-form-item label="活动区域" :label-width="formLabelWidth">-->
                            <!--<el-select v-model="form.region" placeholder="请选择活动区域">-->
                                <!--<el-option label="区域一" value="shanghai"></el-option>-->
                                <!--<el-option label="区域二" value="beijing"></el-option>-->
                            <!--</el-select>-->
                        <!--</el-form-item>-->
                    <!--</el-form>-->
                    <!--<div slot="footer" class="dialog-footer">-->
                        <!--<el-button @click="dialogFormVisible = false">取 消</el-button>-->
                        <!--<el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>-->
                    <!--</div>-->
                <!--</el-dialog>-->
            </div>
            <!--添加栏-->
            <div>
                <el-button type="text" @click="newDialogFormVisible = true">添加新的收货地址</el-button>

                <el-dialog title="收货地址" :visible.sync="newDialogFormVisible">
                    <el-form :model="newReceiverInfo" status-icon :rules="rules">
                        <el-form-item label="活动名称" :label-width="formLabelWidth" prop="receiver">
                            <el-input v-model="newReceiverInfo.receiver"></el-input>
                        </el-form-item>
                        <el-form-item label="电话" :label-width="formLabelWidth" prop="phoneNumber">
                            <el-input v-model="newReceiverInfo.phoneNumber"></el-input>
                        </el-form-item>
                        <el-form-item label="地址" :label-width="formLabelWidth" prop="address">
                            <el-input v-model="newReceiverInfo.address"></el-input>
                        </el-form-item>
                    </el-form>
                    <div slot="footer" class="dialog-footer">
                        <el-button @click="newDialogFormVisible = false">取 消</el-button>
                        <el-button type="primary" @click="addNewReceiverInfo">确 定</el-button>
                    </div>
                </el-dialog>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    new Vue({
        el: "#app",
        data: {
            dialogFormVisible: false,
            newDialogFormVisible: false,
            newReceiverInfo: {
                receiver: '',
                address: '',
                phoneNumber: ''
            },
            formLabelWidth: '120px'
            ,rules:{
                receiver: [
                    { required: true, message: '请输入收件人姓名', trigger: 'blur' },
                    { min: 1, max: 30, message: '长度在 1 到 30 个字符', trigger: 'blur' }
                ],address: [
                    { required: true, message: '请输收件地址', trigger: 'blur' },
                    { min: 1, max: 100, message: '长度在 1 到 100 个字符', trigger: 'blur' }
                ],phoneNumber: [
                    { required: true, message: '请输入收件人电话', trigger: 'blur' },
                    { min: 8, max: 11, message: '长度在 8 到 11 个字符', trigger: 'blur' }
                ]
            }
        },
        methods:{
            addNewReceiverInfo(){
                var _that = this;
                _that.newDialogFormVisible = false;
                axios({
                    method:"post",
                    url:"/ShopWeb/user/addNewReceiver",
                    data: _that.newReceiverInfo
                }).then(function (value) {
                    console.log(value.data.content);
                }).catch(function (reason) {
                    console.log(reason);
                    _that.$message.error("添加新收件地址错误！！");
                })
            }
        }
    })
</script>
</html>